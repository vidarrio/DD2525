<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ topic }}</title>
    <link rel="stylesheet" href="/css/master.css">
    {{> head }}
  </head>
  <body>
    {{> navbar}}
    <div class="container">
      {{#message}}
        <div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>{{.}}</div>
      {{/message}}
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/{{ lcCategory }}">{{ category }}</a></li>
        <li class="active">{{ topic }}</li>
      </ol>

      <a class="btn btn-primary" href="/createThread/{{ lcTopic }}" role="button">New Thread</a>

      <hr>
        <div class="list-group">
          <div style="font-size: 24px" class="list-group-item active">Threads</div>
          <table style="table-layout: fixed" class="table table-striped">
            <tr>
              <th style="width: 30%">Subject</th>
              <th style="width: 16%; text-align: center">Posted By</th>
              <th style="width: 7%; text-align: center">Replies</th>
              <th style="width: 16%; text-align: center">Posted</th>
              <th style="width: 16%; text-align: center">Last Post By</th>
              <th style="width: 15%; text-align: center">Last Post</th>
            </tr>
          {{#threads}}
            <tr class="thread">
              <td><a class="no-link" name="thread-link" href="/thread/{{ _id }}"><div class="text" style="height:100%;width:100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis">{{ subject }}</div></a></td>
              <td style="text-align: center"><a class="no-link" href="/user/{{ posterUsername }}"><div class="text" style="height:100%;width:100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis">
                {{#posterIsAdmin}}
                  <span style="color: #e84d30" title="Admin" data-toggle="tooltip" data-placement="right">{{ posterUsername }}</span>
                {{/posterIsAdmin}}
                {{^posterIsAdmin}}
                  {{ posterUsername }}
                {{/posterIsAdmin}}
              </div></a></td>
              <td name="thread-replies" style="text-align: center; overflow: hidden; white-space: nowrap; text-overflow: ellipsis">{{ numReplies }}</td>
              <td style="text-align: center; overflow: hidden; white-space: nowrap; text-overflow: ellipsis" title="{{ formatedPostDate }}" data-toggle="tooltip" data-placement="top">{{ relativePostDate }}</td>
              <td style="text-align: center"><a class="no-link" href="/user/{{ lastPostBy }}"><div class="text" style="height:100%;width:100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis">
                {{#lastPosterIsAdmin}}
                  <span style="color: #e84d30" title="Admin" data-toggle="tooltip" data-placement="right">{{ lastPostBy }}</span>
                {{/lastPosterIsAdmin}}
                {{^lastPosterIsAdmin}}
                  {{ lastPostBy }}
                {{/lastPosterIsAdmin}}
              </div></a></td>
              <td style="text-align: center; overflow: hidden; white-space: nowrap; text-overflow: ellipsis" title="{{ formatedLastPostDate }}" data-toggle="tooltip" data-placement="top">{{ relativeLastPostDate }}</td>
            </tr>
          {{/threads}}
          </table>
        </div>
      {{^bool}}
        <h3 style="text-align: center" class="text-muted">Oh no, there doesn't appear to be anything here! Fix that by <a href="/createThread/{{ lcTopic }}">creating a thread.</a></h3>
      {{/bool}}
    </div>
    {{> footer}}
  </body>
</html>
